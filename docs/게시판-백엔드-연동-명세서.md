# 게시판 백엔드 연동 명세서

> 프론트엔드 구현 기준 | DB/API 연동 시 참고용  
> 작성일: 2026-02

---

## 1. 개요

게시판은 **강의평가**와 **커뮤니티(익명/복학생/부전공/복수전공)** 두 종류로 구분됩니다.

| 구분 | 설명 | URL |
|------|------|-----|
| 강의평가 | 과목별 교수 평가, 평점, 상세후기 | `/board/course`, `/board/detail/<id>` |
| 커뮤니티 | 익명/복학생/부전공/복수전공 카테고리별 글 | `/board/community?cat=<category>`, `/board/community/detail/<id>` |

---

## 2. URL 라우팅 (현재 구조)

| URL | 화면 | 비고 |
|-----|------|------|
| `/board` | 강의평가 목록 | |
| `/board/course` | 강의평가 목록 | |
| `/board/community` | 커뮤니티 목록 | `?cat=anonymous|returning|minor|double` |
| `/board/detail/<post_id>` | 강의평가 상세 | |
| `/board/community/detail/<post_id>` | 커뮤니티 상세 | |
| `/board/write/course` | 강의평가 글쓰기 | |
| `/board/write/community` | 커뮤니티 글쓰기 | |

---

## 3. 데이터 구조

### 3.1 강의평가 (Course Evaluation)

#### 목록 카드
```json
{
  "id": 1,
  "subject": "데이터베이스",
  "professor": "김교수",
  "rating": 4
}
```

#### 상세
```json
{
  "id": 1,
  "subject": "데이터베이스",
  "professor": "김교수",
  "semester": "4학년 1학기",
  "rating": 4,
  "workload": "없음",
  "team_project": "있음",
  "attendance": "직접호명",
  "content": "과제가 많긴 하지만 실무에 도움되는...",
  "comment_count": 2,
  "comments": [
    { "author": "익명", "text": "저도 수강했는데 공감해요!" },
    { "author": "익명", "text": "팀플 조원 잘 만나시길 바랍니다." }
  ]
}
```

#### 글쓰기 폼 필드 (name 속성)
| name | 타입 | 설명 | 값/옵션 |
|------|------|------|---------|
| professor | string | 교수명 | |
| subject | string | 과목명 | |
| rating | string | 평점 | 1~5 |
| workload | string | 과제량 | none, very_low, low, medium, high, very_high |
| team_project | string | 팀프로젝트 여부 | no, yes |
| attendance | string | 출석방식 | direct, electronic, none |
| content | string | 상세 후기 | |

**workload 값 매핑**
- none: 없음
- very_low: 매우 적음
- low: 적음
- medium: 보통
- high: 많음
- very_high: 매우 많음

**attendance 값 매핑**
- direct: 직접 호명
- electronic: 전자 출석
- none: 출석 체크 안함

---

### 3.2 커뮤니티 (익명/복학생/부전공/복수전공)

#### 목록 카드
```json
{
  "id": 1,
  "title": "졸업요건 확인하는 거 아시는 분",
  "preview": "학교 포털 어디에서 확인하는지 모르겠어요 ㅠㅠ",
  "comment_count": 12
}
```

#### 상세
```json
{
  "id": 1,
  "title": "졸업요건 확인하는 거 아시는 분",
  "content": "학교 포털 어디에서 확인하는지 모르겠어요 ㅠㅠ\n\n졸업요건 체크하는 메뉴가...",
  "comment_count": 2,
  "comments": [
    { "author": "익명", "text": "학생지원팀에 문의해보세요!" }
  ]
}
```

#### 글쓰기 폼 필드 (name 속성)
| name | 타입 | 설명 | 값/옵션 |
|------|------|------|---------|
| category | string | 카테고리 | anonymous, returning, minor, double |
| title | string | 제목 | |
| content | string | 내용 | |

#### category 값 매핑
- anonymous: 익명
- returning: 복학생
- minor: 부전공
- double: 복수전공

---

### 3.3 댓글 (공통)

```json
{
  "author": "익명",
  "text": "댓글 내용"
}
```

- 강의평가/커뮤니티 모두 동일 구조
- 익명 게시판은 author를 "익명"으로 고정

---

## 4. API 엔드포인트 제안

### 4.1 강의평가

| Method | Endpoint | 설명 |
|--------|----------|------|
| GET | `/api/board/course` | 목록 조회 (검색: professor, subject) |
| GET | `/api/board/course/<id>` | 상세 조회 |
| POST | `/api/board/course` | 글 작성 |
| POST | `/api/board/course/<id>/comments` | 댓글 작성 |

### 4.2 커뮤니티

| Method | Endpoint | 설명 |
|--------|----------|------|
| GET | `/api/board/community` | 목록 조회 (query: cat, search) |
| GET | `/api/board/community/<id>` | 상세 조회 |
| POST | `/api/board/community` | 글 작성 |
| POST | `/api/board/community/<id>/comments` | 댓글 작성 |

### 4.3 검색 파라미터

**강의평가 목록**
- `professor`: 교수명
- `subject`: 과목명 또는 과목코드

**커뮤니티 목록**
- `cat`: anonymous | returning | minor | double
- `search`: 과목명 또는 과목코드 (선택)

---

## 5. DB 테이블 제안

### 5.1 강의평가 (course_posts)

| 컬럼 | 타입 | 설명 |
|------|------|------|
| id | PK | |
| professor | VARCHAR | 교수명 |
| subject | VARCHAR | 과목명 |
| semester | VARCHAR | 수강학기 (예: 4학년 1학기) |
| rating | INT | 평점 1~5 |
| workload | VARCHAR | none, very_low, low, medium, high, very_high |
| team_project | VARCHAR | no, yes |
| attendance | VARCHAR | direct, electronic, none |
| content | TEXT | 상세 후기 |
| created_at | DATETIME | |
| updated_at | DATETIME | |

### 5.2 커뮤니티 (community_posts)

| 컬럼 | 타입 | 설명 |
|------|------|------|
| id | PK | |
| category | VARCHAR | anonymous, returning, minor, double |
| title | VARCHAR | 제목 |
| content | TEXT | 내용 |
| created_at | DATETIME | |
| updated_at | DATETIME | |

### 5.3 댓글 (comments)

| 컬럼 | 타입 | 설명 |
|------|------|------|
| id | PK | |
| post_type | VARCHAR | course / community |
| post_id | FK | 게시글 ID |
| author | VARCHAR | 익명 시 "익명" |
| text | TEXT | 댓글 내용 |
| created_at | DATETIME | |

**comment_count**: `comments` 테이블 COUNT 또는 posts 테이블에 denormalized 컬럼

---

## 6. 프론트엔드 연동 포인트

### 6.1 현재 동작 (mock)
- 글쓰기 폼 제출 → `e.preventDefault()`, console.log, alert
- 댓글 등록 → `e.preventDefault()`, console.log, alert
- 목록/상세 → Flask에서 mock 데이터로 템플릿 렌더링

### 6.2 연동 시 변경 필요
1. **글쓰기**: form `action` 설정 또는 JS에서 `fetch('/api/board/course', { method: 'POST', body: formData })` 호출
2. **댓글 등록**: `fetch('/api/board/course/<id>/comments', { method: 'POST', ... })` 호출
3. **목록/상세**: Flask 라우트에서 DB 조회 후 템플릿에 전달 (또는 SPA 전환 시 fetch로 API 호출)

### 6.3 프론트엔드가 기대하는 필드명
- 목록: `id`, `subject` 또는 `title`, `professor` 또는 `preview`, `rating`, `comment_count`
- 상세: 위 + `content`, `comments` (배열), `semester`, `workload`, `team_project`, `attendance`
- 댓글: `author`, `text`

---

## 7. 참고 파일

| 파일 | 용도 |
|------|------|
| `backend/app/routes/board.py` | 현재 라우트, mock 데이터 구조 |
| `frontend/templates/board/*.html` | 템플릿, form name 속성 |
| `frontend/static/js/api.js` | API 호출 유틸 (fetchApi) |

---

## 8. 체크리스트 (백엔드 연동 시)

- [ ] DB 테이블 생성 (course_posts, community_posts, comments)
- [ ] 강의평가 목록 API (검색 지원)
- [ ] 강의평가 상세 API
- [ ] 강의평가 글쓰기 API
- [ ] 강의평가 댓글 API
- [ ] 커뮤니티 목록 API (cat, search)
- [ ] 커뮤니티 상세 API
- [ ] 커뮤니티 글쓰기 API
- [ ] 커뮤니티 댓글 API
- [ ] comment_count 조회/캐싱
- [ ] Flask 라우트에서 DB 조회로 전환 (또는 API 응답 연동)
